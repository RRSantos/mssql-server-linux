version: "3.7"

services:
  sql:
    container_name: mssql-tests
    image: mssql-server-linux:2019-latest
    build:
      context: ..\.
    environment:      {
      "ACCEPT_EULA": "Y",
      "SA_PASSWORD": "P2ssw0rd",
      "MSSQL_DATABASE": "TestDB",
      "MSSQL_DATABASE_COLLATE": "SQL_Latin1_General_CP1_CI_AI",
      "MSSQL_USER": "myUserSQL",
      "MSSQL_PASSWORD": "abc123",
      "MSSQL_ATTACH_DATABASE_NAME":"MyAttachDB",
      "MSSQL_ATTACH_DATABASE_PATH":"/temp/sql/attachDB"
    }
    ports:
      - 1433:1433
    volumes:
      - "./sql-scripts/:/docker-entrypoint-initdb.d/"
      - "./mouting-point/://temp/sql/"      
      - sql_data:/var/opt/mssql/data
      - sql_log:/var/opt/mssql/log
      - sql_files:/var/opt/mssql/file_tables

volumes:
  sql_data:
  sql_log:
  sql_files:
